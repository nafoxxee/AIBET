<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI BET Analytics - Mini App</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loading-screen" class="screen active">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <h2>AI BET Analytics</h2>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="main-screen" class="screen">
            <header class="header">
                <div class="header-content">
                    <h1>üéØ AI BET Analytics</h1>
                    <div class="user-info">
                        <span id="username">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                        <span id="user-status" class="status-badge">üü¢</span>
                    </div>
                </div>
            </header>
            
            <nav class="main-nav">
                <button class="nav-btn" onclick="showScreen('cs2-screen')">
                    <span class="nav-icon">üî´</span>
                    <span class="nav-label">CS2</span>
                    <span class="nav-count" id="cs2-count">0</span>
                </button>
                <button class="nav-btn" onclick="showScreen('khl-screen')">
                    <span class="nav-icon">üèí</span>
                    <span class="nav-label">–ö–•–õ</span>
                    <span class="nav-count" id="khl-count">0</span>
                </button>
                <button class="nav-btn" onclick="showScreen('live-screen')">
                    <span class="nav-icon">üî¥</span>
                    <span class="nav-label">Live</span>
                    <span class="nav-count" id="live-count">0</span>
                </button>
                <button class="nav-btn" onclick="showScreen('prematch-screen')">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-label">–ü—Ä–µ–¥–º–∞—Ç—á</span>
                </button>
                <button class="nav-btn" onclick="showScreen('history-screen')">
                    <span class="nav-icon">üìà</span>
                    <span class="nav-label">–ò—Å—Ç–æ—Ä–∏—è</span>
                </button>
                <button class="nav-btn" onclick="showScreen('stats-screen')">
                    <span class="nav-icon">üìâ</span>
                    <span class="nav-label">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                </button>
                <button class="nav-btn" onclick="showScreen('confidence-screen')">
                    <span class="nav-icon">‚≠ê</span>
                    <span class="nav-label">Confidence</span>
                </button>
                <button class="nav-btn" onclick="showScreen('status-screen')">
                    <span class="nav-icon">üîß</span>
                    <span class="nav-label">–°—Ç–∞—Ç—É—Å</span>
                </button>
                <button class="nav-btn admin-only" onclick="showScreen('admin-screen')" style="display: none;">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-label">–ê–¥–º–∏–Ω</span>
                </button>
            </nav>
            
            <div class="quick-stats">
                <div class="stat-card">
                    <div class="stat-value" id="total-signals">0</div>
                    <div class="stat-label">–°–∏–≥–Ω–∞–ª–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="accuracy">0%</div>
                    <div class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="active-analyses">0</div>
                    <div class="stat-label">–ê–Ω–∞–ª–∏–∑–æ–≤</div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω CS2 -->
        <div id="cs2-screen" class="screen">
            <header class="header">
                <button class="back-btn" onclick="showScreen('main-screen')">‚Üê</button>
                <h1>üî´ CS2 –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1>
                <button class="refresh-btn" onclick="refreshCS2Data()">üîÑ</button>
            </header>
            
            <div class="content">
                <div class="filter-section">
                    <select id="cs2-tournament-filter" onchange="applyFilters('cs2')">
                        <option value="all">–í—Å–µ —Ç—É—Ä–Ω–∏—Ä—ã</option>
                        <option value="major">Major</option>
                        <option value="iem">IEM</option>
                        <option value="esl">ESL</option>
                        <option value="blast">BLAST</option>
                    </select>
                    <select id="cs2-confidence-filter" onchange="applyFilters('cs2')">
                        <option value="all">–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
                        <option value="HIGH">–í—ã—Å–æ–∫–∞—è</option>
                        <option value="MEDIUM">–°—Ä–µ–¥–Ω—è—è</option>
                        <option value="LOW">–ù–∏–∑–∫–∞—è</option>
                    </select>
                </div>
                
                <div class="tab-section">
                    <button class="tab-btn active" onclick="switchTab('cs2', 'matches')">–ú–∞—Ç—á–∏</button>
                    <button class="tab-btn" onclick="switchTab('cs2', 'signals')">–°–∏–≥–Ω–∞–ª—ã</button>
                    <button class="tab-btn" onclick="switchTab('cs2', 'analytics')">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
                </div>
                
                <div id="cs2-content" class="tab-content">
                    <div id="cs2-matches" class="matches-list">
                        <!-- –ú–∞—Ç—á–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ö–•–õ -->
        <div id="khl-screen" class="screen">
            <header class="header">
                <button class="back-btn" onclick="showScreen('main-screen')">‚Üê</button>
                <h1>üèí –ö–•–õ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1>
                <button class="refresh-btn" onclick="refreshKHLData()">üîÑ</button>
            </header>
            
            <div class="content">
                <div class="filter-section">
                    <select id="khl-tournament-filter" onchange="applyFilters('khl')">
                        <option value="all">–í—Å–µ –º–∞—Ç—á–∏</option>
                        <option value="regular">–†–µ–≥—É–ª—è—Ä–Ω—ã–π —Å–µ–∑–æ–Ω</option>
                        <option value="playoffs">–ü–ª–µ–π-–æ—Ñ—Ñ</option>
                    </select>
                    <select id="khl-confidence-filter" onchange="applyFilters('khl')">
                        <option value="all">–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
                        <option value="HIGH">–í—ã—Å–æ–∫–∞—è</option>
                        <option value="MEDIUM">–°—Ä–µ–¥–Ω—è—è</option>
                        <option value="LOW">–ù–∏–∑–∫–∞—è</option>
                    </select>
                </div>
                
                <div class="tab-section">
                    <button class="tab-btn active" onclick="switchTab('khl', 'matches')">–ú–∞—Ç—á–∏</button>
                    <button class="tab-btn" onclick="switchTab('khl', 'signals')">–°–∏–≥–Ω–∞–ª—ã</button>
                    <button class="tab-btn" onclick="switchTab('khl', 'analytics')">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
                </div>
                
                <div id="khl-content" class="tab-content">
                    <div id="khl-matches" class="matches-list">
                        <!-- –ú–∞—Ç—á–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω Live –º–∞—Ç—á–µ–π -->
        <div id="live-screen" class="screen">
            <header class="header">
                <button class="back-btn" onclick="showScreen('main-screen')">‚Üê</button>
                <h1>üî¥ Live –ú–∞—Ç—á–∏</h1>
                <button class="refresh-btn" onclick="refreshLiveData()">üîÑ</button>
            </header>
            
            <div class="content">
                <div class="live-stats">
                    <div class="live-stat-card cs2">
                        <div class="live-icon">üî´</div>
                        <div class="live-info">
                            <div class="live-count" id="live-cs2-count">0</div>
                            <div class="live-label">CS2 Live</div>
                        </div>
                    </div>
                    <div class="live-stat-card khl">
                        <div class="live-icon">üèí</div>
                        <div class="live-info">
                            <div class="live-count" id="live-khl-count">0</div>
                            <div class="live-label">–ö–•–õ Live</div>
                        </div>
                    </div>
                </div>
                
                <div id="live-matches" class="matches-list">
                    <!-- Live –º–∞—Ç—á–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–µ–¥–º–∞—Ç—á–µ–≤–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -->
        <div id="prematch-screen" class="screen">
            <header class="header">
                <button class="back-btn" onclick="showScreen('main-screen')">‚Üê</button>
                <h1>üìä –ü—Ä–µ–¥–º–∞—Ç—á</h1>
                <button class="refresh-btn" onclick="refreshPrematchData()">üîÑ</button>
            </header>
            
            <div class="content">
                <div class="time-filter">
                    <button class="time-btn active" data-hours="3" onclick="filterByTime(3)">3 —á–∞—Å–∞</button>
                    <button class="time-btn" data-hours="6" onclick="filterByTime(6)">6 —á–∞—Å–æ–≤</button>
                    <button class="time-btn" data-hours="12" onclick="filterByTime(12)">12 —á–∞—Å–æ–≤</button>
                    <button class="time-btn" data-hours="24" onclick="filterByTime(24)">24 —á–∞—Å–∞</button>
                </div>
                
                <div id="prematch-matches" class="matches-list">
                    <!-- –ü—Ä–µ–¥–º–∞—Ç—á–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∏—Å—Ç–æ—Ä–∏–∏ -->
        <div id="history-screen" class="screen">
            <header class="header">
                <button class="back-btn" onclick="showScreen('main-screen')">‚Üê</button>
                <h1>üìà –ò—Å—Ç–æ—Ä–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤</h1>
                <button class="refresh-btn" onclick="refreshHistory()">üîÑ</button>
            </header>
            
            <div class="content">
                <div class="history-stats">
                    <div class="history-stat-card">
                        <div class="history-stat-value" id="history-total">0</div>
                        <div class="history-stat-label">–í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤</div>
                    </div>
                    <div class="history-stat-card">
                        <div class="history-stat-value" id="history-accuracy">0%</div>
                        <div class="history-stat-label">–¢–æ—á–Ω–æ—Å—Ç—å</div>
                    </div>
                    <div class="history-stat-card">
                        <div class="history-stat-value" id="history-streak">0</div>
                        <div class="history-stat-label">–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è</div>
                    </div>
                </div>
                
                <div class="filter-section">
                    <select id="history-sport-filter" onchange="filterHistory()">
                        <option value="all">–í—Å–µ –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞</option>
                        <option value="cs2">CS2</option>
                        <option value="khl">–ö–•–õ</option>
                    </select>
                    <select id="history-result-filter" onchange="filterHistory()">
                        <option value="all">–í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</option>
                        <option value="win">–í—ã–∏–≥—Ä—ã—à</option>
                        <option value="lose">–ü—Ä–æ–∏–≥—Ä—ã—à</option>
                        <option value="pending">–û–∂–∏–¥–∞–Ω–∏–µ</option>
                    </select>
                </div>
                
                <div id="history-list" class="history-list">
                    <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div id="stats-screen" class="screen">
            <header class="header">
                <button class="back-btn" onclick="showScreen('main-screen')">‚Üê</button>
                <h1>üìâ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
                <button class="refresh-btn" onclick="refreshStats()">üîÑ</button>
            </header>
            
            <div class="content">
                <div class="stats-tabs">
                    <button class="stats-tab-btn active" onclick="switchStatsTab('overview')">–û–±–∑–æ—Ä</button>
                    <button class="stats-tab-btn" onclick="switchStatsTab('cs2')">CS2</button>
                    <button class="stats-tab-btn" onclick="switchStatsTab('khl')">–ö–•–õ</button>
                    <button class="stats-tab-btn" onclick="switchStatsTab('scenarios')">–°—Ü–µ–Ω–∞—Ä–∏–∏</button>
                </div>
                
                <div id="stats-content" class="stats-content">
                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–π—Ç–∏–Ω–≥–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ -->
        <div id="confidence-screen" class="screen">
            <header class="header">
                <button class="back-btn" onclick="showScreen('main-screen')">‚Üê</button>
                <h1>‚≠ê –†–µ–π—Ç–∏–Ω–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏</h1>
                <button class="refresh-btn" onclick="refreshConfidence()">üîÑ</button>
            </header>
            
            <div class="content">
                <div class="confidence-legend">
                    <div class="legend-item high">
                        <div class="legend-color"></div>
                        <div class="legend-text">–í–´–°–û–ö–ê–Ø (80-100%)</div>
                    </div>
                    <div class="legend-item medium">
                        <div class="legend-color"></div>
                        <div class="legend-text">–°–†–ï–î–ù–Ø–Ø (50-79%)</div>
                    </div>
                    <div class="legend-item low">
                        <div class="legend-color"></div>
                        <div class="legend-text">–ù–ò–ó–ö–ê–Ø (0-49%)</div>
                    </div>
                </div>
                
                <div id="confidence-list" class="confidence-list">
                    <!-- –†–µ–π—Ç–∏–Ω–≥–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã -->
        <div id="status-screen" class="screen">
            <header class="header">
                <button class="back-btn" onclick="showScreen('main-screen')">‚Üê</button>
                <h1>üîß –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h1>
                <button class="refresh-btn" onclick="refreshStatus()">üîÑ</button>
            </header>
            
            <div class="content">
                <div class="system-status">
                    <div class="status-item">
                        <div class="status-label">Backend API</div>
                        <div class="status-value" id="backend-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">CS2 Parser</div>
                        <div class="status-value" id="cs2-parser-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">–ö–•–õ Parser</div>
                        <div class="status-value" id="khl-parser-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">CS2 ML Model</div>
                        <div class="status-value" id="cs2-ml-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">–ö–•–õ ML Model</div>
                        <div class="status-value" id="khl-ml-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Telegram Bot</div>
                        <div class="status-value" id="telegram-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
                    </div>
                </div>
                
                <div class="system-info">
                    <h3>–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    <div id="system-details">
                        <!-- –î–µ—Ç–∞–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
        <div id="admin-screen" class="screen">
            <header class="header">
                <button class="back-btn" onclick="showScreen('main-screen')">‚Üê</button>
                <h1>‚öôÔ∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
            </header>
            
            <div class="content">
                <div class="admin-actions">
                    <button class="admin-btn" onclick="adminAction('run-analysis')">
                        <span class="admin-icon">üöÄ</span>
                        <span class="admin-text">–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑</span>
                    </button>
                    <button class="admin-btn" onclick="adminAction('restart-parsers')">
                        <span class="admin-icon">üîÑ</span>
                        <span class="admin-text">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä—ã</span>
                    </button>
                    <button class="admin-btn" onclick="adminAction('retrain-ml')">
                        <span class="admin-icon">üß†</span>
                        <span class="admin-text">–ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å ML</span>
                    </button>
                    <button class="admin-btn" onclick="adminAction('clear-cache')">
                        <span class="admin-icon">üóëÔ∏è</span>
                        <span class="admin-text">–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à</span>
                    </button>
                    <button class="admin-btn" onclick="adminAction('backup-data')">
                        <span class="admin-icon">üíæ</span>
                        <span class="admin-text">–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è</span>
                    </button>
                    <button class="admin-btn" onclick="adminAction('test-mode')">
                        <span class="admin-icon">üß™</span>
                        <span class="admin-text">–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º</span>
                    </button>
                </div>
                
                <div class="admin-logs">
                    <h3>–°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏</h3>
                    <div id="admin-log-content">
                        <!-- –õ–æ–≥–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</h3>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="modal-body">
                –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
