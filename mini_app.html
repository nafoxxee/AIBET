<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIBET - Analytical Betting Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo {
            font-size: 2.5rem;
            color: #00ff88;
            margin-bottom: 10px;
        }
        
        .status {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .loading {
            color: #ff9800;
        }
        
        .ready {
            color: #4caf50;
        }
        
        .error {
            color: #f44336;
        }
        
        .nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .nav-btn {
            background: #1a1a1a;
            color: #ffffff;
            border: 1px solid #2a2a2a;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background: #00ff88;
            color: #0a0a0a;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .card {
            background: #1a1a1a;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #2a2a2a;
        }
        
        .card h2 {
            color: #00ff88;
            margin-bottom: 15px;
        }
        
        .loading-spinner {
            border: 4px solid #2a2a2a;
            border-top: 4px solid #00ff88;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="logo">üéØ AIBET</h1>
            <p>Analytical Betting Platform</p>
        </div>
        
        <div class="status" id="status">
            <div class="loading-spinner"></div>
            <p>–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è...</p>
        </div>
        
        <nav class="nav">
            <button class="nav-btn active" onclick="showSection('home')">üè† –ì–ª–∞–≤–Ω–∞—è</button>
            <button class="nav-btn" onclick="showSection('signals')">üéØ –°–∏–≥–Ω–∞–ª—ã</button>
            <button class="nav-btn" onclick="showSection('matches')">üìä –ú–∞—Ç—á–∏</button>
            <button class="nav-btn" onclick="showSection('stats')">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
        </nav>
        
        <main>
            <section id="home" class="section active">
                <div class="card">
                    <h2>üéØ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AIBET</h2>
                    <p>–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å—Ç–∞–≤–æ–∫ –Ω–∞ CS2 –∏ –ö–•–õ</p>
                    <p>–°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...</p>
                </div>
            </section>
            
            <section id="signals" class="section">
                <div class="card">
                    <h2>üéØ –°–∏–≥–Ω–∞–ª—ã</h2>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤...</p>
                    <div class="loading-spinner"></div>
                </div>
            </section>
            
            <section id="matches" class="section">
                <div class="card">
                    <h2>üìä –ú–∞—Ç—á–∏</h2>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç—á–µ–π...</p>
                    <div class="loading-spinner"></div>
                </div>
            </section>
            
            <section id="stats" class="section">
                <div class="card">
                    <h2>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p>
                    <div class="loading-spinner"></div>
                </div>
            </section>
        </main>
    </div>
    
    <script>
        let apiBase = window.location.origin;
        let systemReady = false;
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
        async function checkSystemStatus() {
            try {
                const response = await fetch(`${apiBase}/api/health`);
                if (response.ok) {
                    const data = await response.json();
                    updateStatus('ready', '‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ');
                    systemReady = true;
                    loadData();
                } else {
                    updateStatus('error', '‚ùå –°–∏—Å—Ç–µ–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                }
            } catch (error) {
                updateStatus('loading', '‚ö†Ô∏è –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è / —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è');
                // –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(checkSystemStatus, 5000);
            }
        }
        
        function updateStatus(type, message) {
            const statusEl = document.getElementById('status');
            statusEl.className = `status ${type}`;
            statusEl.innerHTML = `
                ${type === 'loading' ? '<div class="loading-spinner"></div>' : ''}
                <p>${message}</p>
            `;
        }
        
        function showSection(sectionId) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å–µ–∫—Ü–∏–∏
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å–µ–∫—Ü–∏—é
            document.getElementById(sectionId).classList.add('active');
            
            // –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞
            if (systemReady) {
                loadSectionData(sectionId);
            }
        }
        
        async function loadData() {
            if (!systemReady) return;
            
            loadSectionData('home');
            loadSectionData('signals');
            loadSectionData('matches');
            loadSectionData('stats');
        }
        
        async function loadSectionData(sectionId) {
            if (!systemReady) return;
            
            try {
                let data;
                switch(sectionId) {
                    case 'home':
                        data = await fetch(`${apiBase}/api/statistics/home`).then(r => r.json());
                        updateHomeSection(data);
                        break;
                    case 'signals':
                        data = await fetch(`${apiBase}/api/signals/active`).then(r => r.json());
                        updateSignalsSection(data);
                        break;
                    case 'matches':
                        data = await fetch(`${apiBase}/api/matches/upcoming`).then(r => r.json());
                        updateMatchesSection(data);
                        break;
                    case 'stats':
                        data = await fetch(`${apiBase}/api/statistics`).then(r => r.json());
                        updateStatsSection(data);
                        break;
                }
            } catch (error) {
                console.error(`Error loading ${sectionId}:`, error);
            }
        }
        
        function updateHomeSection(data) {
            const section = document.querySelector('#home .card');
            section.innerHTML = `
                <h2>üéØ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AIBET</h2>
                <p>–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å—Ç–∞–≤–æ–∫ –Ω–∞ CS2 –∏ –ö–•–õ</p>
                <div style="margin-top: 20px;">
                    <p><strong>–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤:</strong> ${data.quick_stats?.active_signals || 0}</p>
                    <p><strong>–ú–∞—Ç—á–µ–π –≤ –±–∞–∑–µ:</strong> ${data.quick_stats?.matches || 0}</p>
                    <p><strong>–ö–æ–º–∞–Ω–¥:</strong> ${data.quick_stats?.teams || 0}</p>
                </div>
            `;
        }
        
        function updateSignalsSection(signals) {
            const section = document.querySelector('#signals .card');
            if (signals && signals.length > 0) {
                const signalsHtml = signals.map(signal => `
                    <div style="background: #0a0a0a; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                        <h4>${signal.team1} vs ${signal.team2}</h4>
                        <p>–ü—Ä–æ–≥–Ω–æ–∑: ${signal.prediction}</p>
                        <p>–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: ${signal.confidence}%</p>
                    </div>
                `).join('');
                section.innerHTML = `<h2>üéØ –°–∏–≥–Ω–∞–ª—ã</h2>${signalsHtml}`;
            } else {
                section.innerHTML = `<h2>üéØ –°–∏–≥–Ω–∞–ª—ã</h2><p>–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ—Ç</p>`;
            }
        }
        
        function updateMatchesSection(matches) {
            const section = document.querySelector('#matches .card');
            if (matches && matches.length > 0) {
                const matchesHtml = matches.map(match => `
                    <div style="background: #0a0a0a; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                        <h4>${match.team1} vs ${match.team2}</h4>
                        <p>–°–ø–æ—Ä—Ç: ${match.sport}</p>
                        <p>–î–∞—Ç–∞: ${new Date(match.date).toLocaleString()}</p>
                    </div>
                `).join('');
                section.innerHTML = `<h2>üìä –ú–∞—Ç—á–∏</h2>${matchesHtml}`;
            } else {
                section.innerHTML = `<h2>üìä –ú–∞—Ç—á–∏</h2><p>–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –º–∞—Ç—á–µ–π –Ω–µ—Ç</p>`;
            }
        }
        
        function updateStatsSection(stats) {
            const section = document.querySelector('#stats .card');
            section.innerHTML = `
                <h2>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div style="margin-top: 20px;">
                    <p><strong>–ö–æ–º–∞–Ω–¥—ã:</strong> ${stats.teams?.total || 0}</p>
                    <p><strong>–ú–∞—Ç—á–∏:</strong> ${stats.matches?.total || 0}</p>
                    <p><strong>–°–∏–≥–Ω–∞–ª—ã:</strong> ${stats.signals?.total || 0}</p>
                </div>
            `;
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        checkSystemStatus();
    </script>
</body>
</html>
